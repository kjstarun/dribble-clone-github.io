<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./preview.css">
   <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            margin: auto;
            width: 100%;
            font-family: 'Lato', sans-serif;
            font-size: 16px;
        }

        .vp {
            height: auto;
            padding: 50px 0;
            width: 75%;
            margin: auto;
        }

        input,
        textarea,
        button {
            background-color: rgba(42, 42, 42, 0.721);
            border: none;
            margin-bottom: 50px;
            outline: none;
            color: white;
        }

        h1 {
            text-align: center;
            font-size: 50px;
        }

        #card-container {
            margin: auto;
            width: 90%;
            max-height: 40%;
            border: 1px solid grey;
        }

        .form-container {
            margin: 25px 40px;

        }

        .form-container .column {
            padding: 10px;
        }

        .form1,
        .form-container input,
        textarea,
        select {
            max-width: 100%;
            min-width: 100%;
            margin: 15px 0;

        }

        input {
            height: 25px;
        }

        button {
            margin-left: 45%;
            padding: 10px 30px;
            font-size: 18px;
        }

        button:hover {
            background-color: darkred;
            opacity: 0.7;
        }

        textarea {
            min-height: 100px;
        }

        input,
        textarea {
            padding: 5px 10px;
        }

        .radio form {
            display: flex;
            justify-content: space-evenly;
            align-items: center;
        }

        .radio form div {
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            gap: 5px;
        }

        input[type="radio"]:hover {
            cursor: pointer;
        }

        input[type="radio"]:disabled:hover {
            cursor: not-allowed;
        }

        .custom {
            display: flex;
            width: 90%;
            justify-content: space-evenly;
            align-items: center;
            margin: 25px 0px 60px 50px;
        }
    </style>

</head>

<body>
    <div class="vp">
        <div class="form-container">
            <div class="column">
                <form class="form1">
                    <label for="title">Card Title:</label>
                    <input type="text" id="title" name="title">
                    <label for="from">From:</label>
                    <input type="text" id="from" name="from">
                </form>
            </div>
            <div class="column">
                <form class="form1">
                    <label for="msg">Message:</label>
                    <textarea id="msg" name="message"></textarea>
                </form>
            </div>
        </div>
        <button id="save-button">Save Card</button>
        <div id="card-container">
            <div class="text-container">
                <h2 id="card-title">ABCDEF</h2>
                <p id="card-msg">Lorum Ipsum and a Happy New Year! We would like to
                    thank our entire community for their support this year. We enjoyed all
                    the challenged and achievements 2017 brought our way and we're looking
                    forward to what 2018 will bring.<br><br>May your holidays be filled with
                    code and cocoa!</p>
                <h3 id="card-from">Greetings</h3>
            </div>
            <div class="column">
                <img id="card-image">
                <div id="snow"></div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js" ,></script>
    <script>
        const listSet = [
            {
                imageLink: "./realistic-happy-birthday-black-golden_1361-3241.webp",
                imageName: "Tarun",
                likeCount: 0,
                viewsCount: 0,
                category: "Birthday",
                color: "Black",
                id: 0,
            },
            {
                imageLink: "./NoYclA.webp",
                imageName: "Hareesh",
                likeCount: 0,
                viewsCount: 0,
                category: "Anniversary",
                color: "Pink",
                id: 1,
            },
            {
                imageLink: "./pikrepo.jpg",
                imageName: "Ashwary",
                likeCount: 0,
                viewsCount: 0,
                category: "Wedding",
                color: "White",
                id: 2,
            },
        ];

        const data = window.location.search;
        const param = new URLSearchParams(data);

        const QueryId = param.get("id");
        console.log(QueryId);
        // if (QueryId === 1) {
        //     console.log(true);
        // } else {
        //     console.log(false);
        // }
        let image = document.getElementById("card-image")

        listSet.filter((item) => {
            // console.log("item", item.id);
            if (item.id == QueryId) {
                console.log("id", item.id);
                image.src = item.imageLink
            }
        })

        let cardContainer = document.getElementById('card-container');
        let cardImage = document.getElementById('card-image');
        let cardTitle = document.getElementById('card-title');
        let cardMsg = document.getElementById('card-msg');
        let cardFrom = document.getElementById('card-from');

        let formTitle = document.getElementById('title');
        let formFrom = document.getElementById('from');
        let formMsg = document.getElementById('msg');
        let formImage = document.getElementById('image');
        let saveButton = document.getElementById('save-button');

        formTitle.addEventListener('keyup', function (event) {
            cardTitle.innerText = event.target.value;
        })

        formFrom.addEventListener('keyup', function (event) {
            cardFrom.innerText = event.target.value;
        })

        formMsg.addEventListener('keyup', function (event) {
            cardMsg.innerText = event.target.value;
        })

        saveButton.addEventListener('click', function (event) {
            event.preventDefault();
            html2canvas(cardContainer, {
                onrendered: function (canvas) {
                    let myImage = canvas.toDataURL("image/png");
                    downloadURI("data:" + myImage, "CustomGreeting.png");
                }
            });
        });

        function downloadURI(uri, name) {
            let link = document.createElement("a");
            link.download = name;
            link.href = uri;
            link.click();
        }
    </script>
</body>

</html>